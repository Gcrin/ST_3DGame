-멀티 웨이브

한 레벨 안에서 여러 웨이브를 연달아 진행하는 식으로 게임 루프를 바꿨습니다.
웨이브마다 시간이나 아이템 개수를 다르게 설정할 수 있도록 FWaveData 구조체를 만들어서 블루프린트에서 직접 웨이브 난이도를 쉽게 조절할 수 있게 만들었습니다.

-HUD & 메뉴 리뉴얼

UI는 내부 구조를 고쳤습니다 예전처럼 Tick으로 매번 모든 정보를 강제로 업데이트하는 비효율적인 방식 대신 Delegate를 활용한 이벤트 기반 방식으로 바꿨습니다.
이제 GameState나 Character는 점수나 체력이 바뀔 때 신호만 보내면 USTHUDWidget이 그 신호를 듣고 알아서 필요한 부분만 업데이트합니다 덕분에 코드도 깔끔해지고 쓸데없는 계산이 없어져서 성능에도 더 좋습니다.

-통합 디버프 시스템

디버프를 하나하나 따로 만드는 노가다 방식 대신 앞으로 어떤 디버프든 쉽게 추가할 수 있도록 확장성 있는 통합 시스템을 만들었습니다. 전략 패턴을 써서 '감속', '실명', '독' 같은 실제 효과 로직을 USTDebuffEffectBase를 상속받는 개별 클래스로 분리했습니다.
데이터 주도 설계를 적용해서 데이터 테이블(DT_DebuffInfo)에 아이콘이나 사용할 C++ 로직 클래스 같은 정보를 쭉 적어두기만 하면 되게 만들었습니다 덕분에 이제 '독'이나 '자성' 같은 새 디버프를 추가할 때 C++ 코드를 거의 건드릴 필요 없이 데이터 테이블에 한 줄 추가하는 것만으로도 가능합니다.

-동적 UI 시스템

플레이어가 디버프에 걸렸다는 걸 확실히 알 수 있도록 UI를 만들었습니다. 캐릭터가 현재 걸린 디버프 목록을 통째로 HUD에 알려주면 HUD는 그 목록을 보고 필요한 만큼 WBP_DebuffIcon 위젯을 실시간으로 만들거나 없애서 보여줍니다.
각 아이콘 위젯은 자기 타이머의 남은 시간을 스스로 계산해서 표시해주기 때문에 플레이어는 언제 디버프가 풀리는지 정확히 알 수 있습니다.

-3D 위젯 구현

UWidgetComponent를 써서 3D 공간에 UI를 띄웠습니다.
캐릭터 머리 위 체력 바: 캐릭터한테 위젯 컴포넌트를 붙여서 어느 각도에서 보든 항상 나를 바라보는 3D 체력 바를 구현했습니다 체력이 바뀔 때마다 바로바로 반영됩니다.
상호작용 안내 문구: 문에 위젯 컴포넌트를 달아서 플레이어가 문을 쳐다보면 3D 공간에 "F키 누르세요" 같은 안내 문구가 뜨도록 만들었습니다.

-상호작용 시스템

앞으로 문뿐만 아니라 상자나 레버 같은 다양한 상호작용 오브젝트를 추가할 걸 대비해서 STInteractionInterface라는 C++ 인터페이스를 만들었습니다.
덕분에 캐릭터는 LineTrace로 바라보는 물체가 이 인터페이스를 가졌는지만 확인하면 돼서 나중에 새로운 상호작용 오브젝트를 추가해도 캐릭터 코드는 전혀 수정할 필요가 없는 확장성 있는 구조를 만들었습니다.

-고성능 회전 효과

코인이 수백 개 깔려도 렉이 걸리지 않도록 CPU를 쓰는 Tick 대신 GPU를 활용하는 방식을 썼습니다. 머티리얼의 World Position Offset으로 회전 애니메이션을 구현해서 액터의 Tick을 꺼버리고 CPU 부하를 크게 줄였습니다.
